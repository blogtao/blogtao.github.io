
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>fastlane 安装、使用、更新和卸载 - 郭工笔记</title>
    <!--  <meta name="robots" content="nofollow" /> -->
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="郭工">
    

    
    <meta name="description" content="引言 当某种技术到达一定程度，就会出现相应的自动化工具，来节省某个开发环节的时间。如 fastlane    fastlane 是一个可以发布 iOS 和 Android  应用的自动工具，她能够处理乏味的任务，比如生成截图、处理代码签名、发布应用。 fastlane 为我们开发者提供了很多工具和流程，eg: 工作流介绍  准备 首先检查是否已经安装 Xcode 命令行工具，fastlane 使用">
<meta name="keywords" content="fastlane">
<meta property="og:type" content="article">
<meta property="og:title" content="fastlane 安装、使用、更新和卸载">
<meta property="og:url" content="https://blog.devhitao.com/2015/02/26/install-use-uninstall-upgrade-fastlane-on-mac/index.html">
<meta property="og:site_name" content="郭工笔记">
<meta property="og:description" content="引言 当某种技术到达一定程度，就会出现相应的自动化工具，来节省某个开发环节的时间。如 fastlane    fastlane 是一个可以发布 iOS 和 Android  应用的自动工具，她能够处理乏味的任务，比如生成截图、处理代码签名、发布应用。 fastlane 为我们开发者提供了很多工具和流程，eg: 工作流介绍  准备 首先检查是否已经安装 Xcode 命令行工具，fastlane 使用">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://docs.fastlane.tools/img/fastlane_text.png">
<meta property="og:image" content="https://blog.devhitao.com/images/fastlane/intro-fastlane-tree.png">
<meta property="og:image" content="https://blog.devhitao.com/images/fastlane/xcode-select--install.png">
<meta property="og:image" content="https://blog.devhitao.com/images/fastlane/versioning.png">
<meta property="og:image" content="https://blog.devhitao.com/images/fastlane/fastlane-transporter.png">
<meta property="og:updated_time" content="2020-03-04T11:46:59.925Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="fastlane 安装、使用、更新和卸载">
<meta name="twitter:description" content="引言 当某种技术到达一定程度，就会出现相应的自动化工具，来节省某个开发环节的时间。如 fastlane    fastlane 是一个可以发布 iOS 和 Android  应用的自动工具，她能够处理乏味的任务，比如生成截图、处理代码签名、发布应用。 fastlane 为我们开发者提供了很多工具和流程，eg: 工作流介绍  准备 首先检查是否已经安装 Xcode 命令行工具，fastlane 使用">
<meta name="twitter:image" content="https://docs.fastlane.tools/img/fastlane_text.png">

    
    <link rel="alternative" href="/atom.xml" title="郭工笔记" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.png">
    
    
    <link rel="stylesheet" href="/css/style.css">
<!-- </script> -->
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-5819327586326271",
        enable_page_level_ads: true
      });
    </script>
</head>

  <body>
    <header>
      
<div>
		
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="郭工笔记">郭工笔记</a></h1>
				<h2 class="blog-motto">业精于勤，荒于嬉；行成于思，毁于随。</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:blog.devhitao.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/02/26/install-use-uninstall-upgrade-fastlane-on-mac/" title="fastlane 安装、使用、更新和卸载" itemprop="url">fastlane 安装、使用、更新和卸载</a>
  </h1>
  
  <p class="article-time">
    <time datetime="2015-02-26T05:02:52.000Z" itemprop="datePublished"> 发表于 2015-02-26</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#引言"><span class="toc-number">1.</span> <span class="toc-text">引言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#准备"><span class="toc-number">2.</span> <span class="toc-text">准备</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#安装"><span class="toc-number">3.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用"><span class="toc-number">4.</span> <span class="toc-text">使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Fastfile"><span class="toc-number">4.1.</span> <span class="toc-text">Fastfile</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Deliver"><span class="toc-number">4.2.</span> <span class="toc-text">Deliver</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#代码签名"><span class="toc-number">4.3.</span> <span class="toc-text">代码签名</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#更新"><span class="toc-number">5.</span> <span class="toc-text">更新</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#卸载"><span class="toc-number">6.</span> <span class="toc-text">卸载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FQA"><span class="toc-number">7.</span> <span class="toc-text">FQA</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#参考资料"><span class="toc-number">8.</span> <span class="toc-text">参考资料</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#文档信息"><span class="toc-number">9.</span> <span class="toc-text">文档信息</span></a></li></ol>
		
		</div>
		
		<h3 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h3><hr>
<p>当某种技术到达一定程度，就会出现相应的自动化工具，来节省某个开发环节的时间。如 fastlane</p>
<!--https://fastlane.tools/assets/images/fastlane-logo-lockup.png-->
<center><img src="https://docs.fastlane.tools/img/fastlane_text.png" width="50%" height="50%" alt="logo-desktop"></center>

<p>fastlane 是一个可以发布 iOS 和 Android  应用的自动工具，她能够处理乏味的任务，比如生成截图、处理代码签名、发布应用。</p>
<p>fastlane 为我们开发者提供了很多工具和流程，eg:</p>
<center><img src="/images/fastlane/intro-fastlane-tree.png" width="50%" height="50%" alt="intro-fastlane-tree.png"><br>工作流介绍<br></center>

<h3 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h3><hr>
<p>首先检查是否已经安装 Xcode 命令行工具，fastlane 使用 <code>xcodebuild</code> 命令进行打包，运行 <code>xcode-select --install</code> 命令，根据你的情况进行不同处理。</p>
<p>1、如果弹出下图，请确认是你是否已经安装 Xcode 工具</p>
<center><img src="/images/fastlane/xcode-select--install.png" width="50%" height="50%" alt="xcode-select--install.png"><br></center>

<p>1.1、如果你已经安装 Xcode ，请点击<strong>安装</strong>，安装最新版的命令行工具。<br>1.2、如果没有安装 Xcode 工具，如想安装 Xcode ，请点击<strong>获取Xcode</strong>，将会按 Xcode 和最新命令行工具，点击<strong>安装</strong>，只会安装最新版的命令行工具。</p>
<blockquote>
<p>每次重新安装 Xcode ，都需要更新或者安装 xcodebuild 命令行工具。</p>
</blockquote>
<p>2、没有弹出提示，命令行提示 <code>xcode-select: note: install requested for command line developer tools</code>, 则需要运行下面命令，指定 Xcode 命令行工具所在的路径。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ xcode-select -p  // 打印 Xcode 开发目录</span><br><span class="line">/Applications/Xcode.app/Contents/Developer</span><br><span class="line">$  xcode-select --switch /Applications/Xcode.app/Contents/Developer  //进行选择</span><br></pre></td></tr></table></figure></p>
<p>对其他环境要求，Ruby 2.0.0 及以上版本。</p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><hr>
<p>这里主要介绍使用 <code>brew</code> 作为管理工具，你也可以使用 <code>gem</code> 对包进行管理。eg：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo gem install fastlane -NV</span><br></pre></td></tr></table></figure></p>
<p>1、安装 fastlane ，这里使用 <code>brew</code> 管理工具对 fastlane 进行安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew install fastlane</span><br></pre></td></tr></table></figure>
<p>2、 重新安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew reinstall fastlane</span><br></pre></td></tr></table></figure>
<p>3、安装完成之后，可能会提示 <code>export PATH=&quot;$HOME/.fastlane/bin:$PATH&quot;</code> 类似信息，如果 fastlane 在终端中提示不可用，那么需要将其环境添加到系统中。</p>
<p>如果你使用 <code>bash</code> ，你可能需要：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ touch ~/.bash_profile  //建立 .bash_profile 文件，如果此文件存在不需要执行此条命令</span><br><span class="line">$ echo &quot;export PATH=&quot;$HOME/.fastlane/bin:$PATH&quot;&quot; &gt;&gt; ~/.bash_profile</span><br></pre></td></tr></table></figure>
<p>如果你使用 <code>zsh</code> ，你可能需要：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &apos;export PATH=&quot;$HOME/.fastlane/bin:$PATH&quot;&apos; &gt;&gt; ~/.zshrc</span><br></pre></td></tr></table></figure></p>
<p>4、升级更新<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ fastlane update_fastlane</span><br><span class="line">or</span><br><span class="line">$ brew upgrade fastlane</span><br></pre></td></tr></table></figure></p>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><hr>
<p>1、在项目目录下，对项目进行初始化。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ fastlane init //在 init 过程中会出现 登录开发者账号，输入密码和选中 Targets 类似的交互</span><br></pre></td></tr></table></figure>
<p>2、执行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ fastlane release --verbose</span><br><span class="line">or</span><br><span class="line">$ fastlane beta --verbose</span><br></pre></td></tr></table></figure></p>
<p>关于使用的详情说明：<br><a href="https://docs.fastlane.tools/" target="_blank" rel="noopener">https://docs.fastlane.tools/</a></p>
<h4 id="Fastfile"><a href="#Fastfile" class="headerlink" title="Fastfile"></a>Fastfile</h4><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">default_platform(:ios)</span><br><span class="line"></span><br><span class="line">platform :ios do</span><br><span class="line">  desc &quot;Push a new beta build to TestFlight&quot;</span><br><span class="line">  lane :beta do</span><br><span class="line">    build_app(workspace: &quot;Example.xcworkspace&quot;, scheme: &quot;Example&quot;)</span><br><span class="line">    upload_to_testflight</span><br><span class="line">  end</span><br><span class="line">  lane :release do</span><br><span class="line">    build_app(workspace: &quot;Example.xcworkspace&quot;, scheme: &quot;Example&quot;)</span><br><span class="line">    upload_to_app_store</span><br><span class="line">  end</span><br><span class="line">   lane :upload_appstore do</span><br><span class="line">    upload_to_app_store</span><br><span class="line">  end</span><br><span class="line">  lane :upload_bin do</span><br><span class="line">    deliver(</span><br><span class="line">      skip_screenshots: true,</span><br><span class="line">      skip_metadata: true,</span><br><span class="line">  )</span><br><span class="line">  end</span><br><span class="line">  lane :upload_testflight do</span><br><span class="line">    upload_to_testflight</span><br><span class="line">  end</span><br><span class="line">  lane :check_metadata do</span><br><span class="line">    check_app_store_metadata</span><br><span class="line">  end</span><br><span class="line">  lane :upload_metadata do</span><br><span class="line">    deliver(</span><br><span class="line">    	skip_binary_upload: true,</span><br><span class="line">    	skip_screenshots: true,</span><br><span class="line">    	skip_app_version_update: true,</span><br><span class="line">	)</span><br><span class="line">  end</span><br><span class="line">  lane :upload_screenshots do</span><br><span class="line">    deliver(</span><br><span class="line">    	skip_binary_upload: true,</span><br><span class="line">    	skip_metadata: true,</span><br><span class="line">    	skip_app_version_update: true,</span><br><span class="line">	)</span><br><span class="line">  end</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<p>主要 Action:</p>
<p><a href="https://docs.fastlane.tools/actions/gym/" target="_blank" rel="noopener">gym</a><br><code>gym</code>         # alias for <code>build_ios_app</code><br><code>build_app</code>   # Alias for the <code>build_ios_app</code> action</p>
<p><a href="https://docs.fastlane.tools/actions/deliver" target="_blank" rel="noopener">deliver</a><br><code>deliver</code> Alias for the <code>upload_to_app_store</code> action<br><code>appstore</code>  Alias for the <code>upload_to_app_store</code> action<br><code>upload_to_app_store</code> : Upload metadata and binary to App Store Connect (via <em>deliver</em>) </p>
<p><a href="https://docs.fastlane.tools/actions/pilot/" target="_blank" rel="noopener">pilot</a><br><code>pilot</code> Alias for the <code>upload_to_testflight</code> action<br><code>upload_to_testflight</code> : Upload new binary to App Store Connect for TestFlight beta</p>
<p>常用自带 Action:</p>
<table>
<thead>
<tr>
<th style="text-align:center">action</th>
<th style="text-align:center">desc</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>latest_testflight_build_number</code></td>
<td style="text-align:center">Fetches most recent build number from TestFlight</td>
</tr>
<tr>
<td style="text-align:center"><code>appledoc</code></td>
<td style="text-align:center">Generate Apple-like source code documentation from the source code</td>
</tr>
<tr>
<td style="text-align:center"><code>check_app_store_metadata</code></td>
<td style="text-align:center">Check your app’s metadata before you submit your app to review (via <em>precheck</em>)</td>
</tr>
</tbody>
</table>
<p>使用 <code>$fastlane actions</code>,查看更多自带 Action;</p>
<h4 id="Deliver"><a href="#Deliver" class="headerlink" title="Deliver"></a>Deliver</h4><hr>
<blockquote>
<p><a href="https://docs.fastlane.tools/actions/deliver/" target="_blank" rel="noopener">deliver</a> uploads screenshots, metadata and binaries to App Store Connect. Use deliver to submit your app for App Store review.</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ fastlane deliver --help //查看工具介绍</span><br></pre></td></tr></table></figure>
<p>跳过某些选项<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ fastlane deliver --skip_binary_upload [--skip_screenshots] //跳过</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>Downloads existing metadata and stores it locally. This overwrites the local files.</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ fastlane deliver download_metadata --verbose // 下载 metdata 数据</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Downloads all existing screenshots from App Store Connect and stores them in the screenshots folder</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ fastlane deliver download_screenshots --verbose //下载截图</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Generate HTML Summary without uploading/downloading anything</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ fastlane deliver generate_summary --verbose</span><br></pre></td></tr></table></figure>
<p>关于设置代理：</p>
<p>因为 deliver 使用系统 <code>Application Loader.app</code> 进行文件上传，可以修改 <code>⁨net.properties</code> 文件中代理设置。</p>
<p>该文件路径：<br>⁨Xcode.app⁩ ▸ ⁨Contents⁩ ▸ ⁨Applications⁩ ▸ ⁨Application Loader.app⁩ ▸ ⁨Contents⁩ ▸ ⁨itms⁩ ▸ ⁨java⁩ ▸ ⁨lib⁩ ▸ ⁨net.properties</p>
<p>设置方法可以参考：</p>
<ul>
<li><a href="https://docs.fastlane.tools/actions/deliver/#http-proxy" target="_blank" rel="noopener">http-proxy</a></li>
<li><a href="https://docs.oracle.com/javase/8/docs/technotes/guides/net/proxies.html" target="_blank" rel="noopener">Java Proxy Configuration.</a></li>
</ul>
<h4 id="代码签名"><a href="#代码签名" class="headerlink" title="代码签名"></a>代码签名</h4><hr>
<p>fastlane 可以自动进行签名，如果你遇到一些错误，请首先检查代码和资源文件是否能够正常编译和打包，在使用命令工具前可以提前模拟一下，这样做的目的可以排除 fastlane 编译和归档时的错误率。(注：签名配置文件存放位置：<code>~/Library/MobileDevice/Provisioning Profiles</code>)</p>
<p><code>xcodebuild</code> 自带更新和签名工具，需要添加 <code>-allowProvisioningUpdates</code> 配置。查看 <code>method</code> 更多选项<a href="http://blog.devhitao.com/2018/10/23/xcode-command-line-tools/#xcodebuild">export_method</a>。</p>
<p>更多设置方法可以查看</p>
<ul>
<li><a href="https://docs.fastlane.tools/codesigning/getting-started/" target="_blank" rel="noopener">Codesigning concepts</a></li>
<li><a href="https://docs.fastlane.tools/codesigning/troubleshooting/" target="_blank" rel="noopener">Codesigning » Troubleshooting</a></li>
</ul>
<p>方法一：自动配置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">lane :beta do</span><br><span class="line">    build_app(</span><br><span class="line">    	workspace: &quot;Example.xcworkspace&quot;, </span><br><span class="line">    	scheme: &quot;Example&quot;,</span><br><span class="line">    	clean: true,</span><br><span class="line">    	export_xcargs: &quot;-allowProvisioningUpdates&quot;,</span><br><span class="line">    	export_method: &quot;app-store&quot;</span><br><span class="line">    )</span><br><span class="line">  end</span><br></pre></td></tr></table></figure></p>
<p>方法二：手动配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">lane :beta do</span><br><span class="line"> 	get_certificates</span><br><span class="line"> 	get_provisioning_profile</span><br><span class="line">   build_app(</span><br><span class="line">   	workspace: &quot;Example.xcworkspace&quot;, </span><br><span class="line">   	scheme: &quot;Example&quot;,</span><br><span class="line">   	clean: true,</span><br><span class="line">   	export_method: &quot;app-store&quot;</span><br><span class="line">   	export_options: &#123;</span><br><span class="line">   	  	provisioningProfiles: &#123; </span><br><span class="line">       		&quot;online.Example.app&quot; =&gt; &quot;online.Example.app AppStore&quot;</span><br><span class="line">     		&#125;</span><br><span class="line">   	&#125;</span><br><span class="line">   )</span><br><span class="line"> end</span><br></pre></td></tr></table></figure>
<p>方法三 ： 手动管理和自动配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">lane :beta do</span><br><span class="line">    disable_automatic_code_signing(path: &quot;Example.xcodeproj&quot;)</span><br><span class="line">    build_app(</span><br><span class="line">    	workspace: &quot;Example.xcworkspace&quot;, </span><br><span class="line">    	scheme: &quot;Example&quot;,</span><br><span class="line">    	clean: true,</span><br><span class="line">    	export_method: &quot;app-store&quot;</span><br><span class="line">    	export_options: &#123;</span><br><span class="line">    	  	provisioningProfiles: &#123; </span><br><span class="line">        		&quot;online.Example.app&quot; =&gt; &quot;online.Example.app AppStore&quot;</span><br><span class="line">      		&#125;</span><br><span class="line">    	&#125;</span><br><span class="line">    )</span><br><span class="line">    enable_automatic_code_signing(path: &quot;Example.xcodeproj&quot;)</span><br><span class="line">  end</span><br></pre></td></tr></table></figure>
<p>方法四：match管理<br>还没有研究，git repo 和 match 环境匹配，代码 <code>sync_code_signing</code><br><a href="https://codesigning.guide/" target="_blank" rel="noopener">https://codesigning.guide/</a></p>
<h3 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h3><hr>
<p>若将旧版本升级到新版本，你只需要执行下面命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ fastlane update_fastlane</span><br></pre></td></tr></table></figure></p>
<p>若不想从旧版本升级到新版本，可以重新覆盖安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew reinstall fastlane</span><br></pre></td></tr></table></figure></p>
<h3 id="卸载"><a href="#卸载" class="headerlink" title="卸载"></a>卸载</h3><hr>
<p>卸载和安装相对应<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew uninstall fastlane</span><br></pre></td></tr></table></figure></p>
<h3 id="FQA"><a href="#FQA" class="headerlink" title="FQA"></a>FQA</h3><hr>
<p>Q: 若遇到这样的提示 Apple Generic Versioning is not enabled in this project. Before being able to increment and read the version number from your Xcode project, you first need to setup your project properly.<br>A:</p>
<ol>
<li>设置 Current Project Version 的值，建议设置为浮点型；</li>
<li>将 Versioning System 键的值选中为 “Apple Generic”。具体请参考<a href="https://developer.apple.com/library/content/qa/qa1827/_index.html" target="_blank" rel="noopener">Automating Version and Build Numbers Using agvtool</a></li>
</ol>
<center><img src="/images/fastlane/versioning.png" width="70%" height="70%" alt="set-auto-increment-version.png"><br>set-auto-increment-version<br></center>

<hr>
<p>Q: 当 <code>fastlane deliver --overwrite_screenshots download_screenshots</code>时，可能遇到 <a href="https://github.com/fastlane/fastlane/issues/13522" target="_blank" rel="noopener">Couldn’t download already existing screenshots from App Store Connect.</a><br>A: 在 <code>Deliverfile</code> 文件中添加 <code>require &#39;open-uri&#39;</code> 即可解决。</p>
<hr>
<p>Q：当上传返回的错误信息类似为 Return status of iTunes Transporter was 1: Cannot proceed with delivery: an existing transporter instance is currently uploading this package 时，说明上传端口被占用。</p>
<p>原因：iTunes Transporter 是与 Xcode 绑定在一起的 Java 应用程序，上次上传时没有退出，端口一直处于被占用状态。</p>
<p>解决方法：需要先退出占用此端口的进程，在活动监视器中，找占用端口的进程，一般是进程名称为java，退出占用端口的进程后，然后再上传。（端口号一般为101，它可能变化）</p>
<center><img src="/images/fastlane/fastlane-transporter.png" width="70%" height="70%" alt="占用此端口的线程"><br>活动监视器中占用此端口的线程<br></center>

<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><hr>
<ul>
<li><p><a href="https://docs.fastlane.tools/" target="_blank" rel="noopener">fastlane docs</a></p>
</li>
<li><p><a href="https://juejin.im/post/5b7e6e526fb9a01a16448453" target="_blank" rel="noopener">iOS持续集成（三）——fastlane 自定义插件</a></p>
</li>
</ul>
<h3 id="文档信息"><a href="#文档信息" class="headerlink" title="文档信息"></a>文档信息</h3><hr>
<ul>
<li>版权声明：自由转载-保持署名-非商用-非衍生 ( <a rel="noopener" href="http://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a> )</li>
</ul>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/开发工具/">开发工具</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/fastlane/">fastlane</a>
  </div>

</div>

	<div class="article-share" id="share">
	
	  <div data-url="https://blog.devhitao.com/2015/02/26/install-use-uninstall-upgrade-fastlane-on-mac/" data-title="fastlane 安装、使用、更新和卸载 | 郭工笔记" data-tsina="undefined" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2015/03/01/git-usage/" title="使用 Git 进行版本控制">
  <strong>上一篇：</strong><br/>
  <span>
  使用 Git 进行版本控制</span>
</a>
</div>


<div class="next">
<a href="/2015/02/26/install-use-update-cocoapods-on-mac/"  title="CocoaPods 安装、使用、更新和卸载">
 <strong>下一篇：</strong><br/> 
 <span>CocoaPods 安装、使用、更新和卸载
</span>
</a>
</div>

</nav>

	


</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#引言"><span class="toc-number">1.</span> <span class="toc-text">引言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#准备"><span class="toc-number">2.</span> <span class="toc-text">准备</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#安装"><span class="toc-number">3.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用"><span class="toc-number">4.</span> <span class="toc-text">使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Fastfile"><span class="toc-number">4.1.</span> <span class="toc-text">Fastfile</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Deliver"><span class="toc-number">4.2.</span> <span class="toc-text">Deliver</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#代码签名"><span class="toc-number">4.3.</span> <span class="toc-text">代码签名</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#更新"><span class="toc-number">5.</span> <span class="toc-text">更新</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#卸载"><span class="toc-number">6.</span> <span class="toc-text">卸载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FQA"><span class="toc-number">7.</span> <span class="toc-text">FQA</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#参考资料"><span class="toc-number">8.</span> <span class="toc-text">参考资料</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#文档信息"><span class="toc-number">9.</span> <span class="toc-text">文档信息</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/Git/" title="Git">Git<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/Java/" title="Java">Java<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/MySQL/" title="MySQL">MySQL<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Python/" title="Python">Python<sup>8</sup></a></li>
		  
		
		  
			<li><a href="/categories/iOS/" title="iOS">iOS<sup>54</sup></a></li>
		  
		
		  
			<li><a href="/categories/jekyll/" title="jekyll">jekyll<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/linux-Unix-Centos/" title="linux &amp; Unix &amp; Centos">linux &amp; Unix &amp; Centos<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/categories/macOS/" title="macOS">macOS<sup>12</sup></a></li>
		  
		
		  
			<li><a href="/categories/security/" title="security">security<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/开发工具/" title="开发工具">开发工具<sup>15</sup></a></li>
		  
		
		  
			<li><a href="/categories/杂记/" title="杂记">杂记<sup>14</sup></a></li>
		  
		
		</ul>
</div>


  <div class="weixin">
  <br />
<!--
  <p class="asidetitle">微信打赏，赞助小猿</p>
  <p>你的支持，是对小猿的最大鼓励</p>
  <img src="/images/ads/weixin-pay.png" width="220px" />
-->
<br />
  <p class="asidetitle">欢迎关注微博</p>
  <p>微博ID：<a href="https://weibo.com/u/5166488487" target="_blank">@devhitao</a></p>
  <a href="https://weibo.com/u/5166488487" target="_blank"><img src="/images/ads/weibo.png" width="220px" /></a>
  <!-- <p class="asidetitle">iOS交流群</p> -->
  <!-- <p>Q群:326729317,暗号:小锅</p> -->
  <!-- <a href="http://jq.qq.com/?_wv=1027&k=2BjVH4c" target="_blank"><img src="/ad/place-hold.png"  width="220px" /></a> -->
<br />
<br />
  <p class="asidetitle">友情链接</p>
  <p><a href="http://www.ituring.com.cn/" target="_blank">图灵社区</a></p>
  <p><a href="http://www.ruanyifeng.com/blog/" target="_blank">阮一峰的网络日志</a></p>
  <p><a href="https://www.liaoxuefeng.com/" target="_blank">廖雪峰的官方网站</a></p>
  <!-- 
  <p>test</p>
  <a href="http://www.test.com" target="_blank"><img src="/ad/weibo.png"  width="220px" height="100"/></a>
-->
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	
	<div class="social-font" class="clearfix">
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

	<p class="copyright" style="margin-top: 10px;">
<!--cc 图标-->
<a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank"><img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/80x15.png" /></a>
	&nbsp;&nbsp;&nbsp;
	Powered by <a href="https://hexo.io" target="_blank" title="hexo">Hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2020
	
	<a href="/about" target="_blank" title="郭工">郭工</a>
	
<!--	&nbsp;&nbsp;
	原创内容，保留一切权利。-->
<!--cnzz 统计图标-->
&nbsp;&nbsp;&nbsp;
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1261101034'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s11.cnzz.com/z_stat.php%3Fid%3D1261101034%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
	</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>





<!-- Analytics Begin -->

<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-79883090-2', 'blog.devhitao.com');  
ga('send', 'pageview');
</script>



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?6f3ed6f7016660f2922ad49dcee905e3";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
